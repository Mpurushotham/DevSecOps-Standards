
# DevSecOps on Azure Kubernetes Service (AKS)

---

## DevSecOps builds on the practice of DevOps by incorporating security at different stages of a traditional DevOps lifecycle. Some of the benefits of building security in DevOps practices include:

    * Make your applications and systems more secure by providing visibility into security threats and preventing vulnerabilities from reaching deployed environments
    * Increased security awareness with your Development and Operation teams
    * Incorporates automated security processes into your Software Development Lifecycle (SDLC)
    * Reduce cost to remediate by finding security issues early in development and design stages

## When applying DevSecOps to Azure Kubernetes Service (AKS)

there are many considerations for implementing security by different organization roles and teams such as 

### Developers: 

    Building the secure apps running on the AKS (Azure Kubernetes Service) clusters 

### Cloud Platform Engineers: 

    Building the secure AKS clusters Infrastructure

### Operations Team: 

    deploy the containerised apps running on the AKS clusters and govern, monitor the security issues and ensure reliability of the services.

>[!Note] So, this procedure broken out into different DevOps Lifecycle stages with key considerations and embedding security controls and Security best practices.

I will try to includes common processes and tools to incorporate into Azure DevOps - CICD pipelines, opting for easy-to-use built-in tools where available. I would like to strongly emphasize reading this article 
[Build and deploy apps on AKS using DevOps and GitOps] (https://learn.microsoft.com/en-us/azure/architecture/example-scenario/apps/devops-with-aks)


original source link : [DevsecOps+azure AKS visual diagram](https://microsoft.sharepoint.com/:u:/t/AzureArchitectureCenter/ESl-N0a8TAhHtKwF0NDB5jcBMs5aVDWCHw2xUyu6t4oMbA?e=mn0CuY)



![azure_devsecops_diagram](https://github.com/user-attachments/assets/523cf3e1-a238-41d0-9107-68771c65347d)
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: AzureDevSecOps Pages: 1 -->
<svg width="576pt" height="116pt"
 viewBox="0.00 0.00 576.00 116.25" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(0.36 0.36) rotate(0) translate(4 322)">
<title>AzureDevSecOps</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-322 1611.32,-322 1611.32,4 -4,4"/>
<!-- AAD -->
<g id="node1" class="node">
<title>AAD</title>
<polygon fill="lightblue" stroke="lightblue" points="179,-251 0,-251 0,-215 179,-215 179,-251"/>
<text text-anchor="middle" x="89.5" y="-229.3" font-family="Times,serif" font-size="14.00">Azure Active Directory</text>
</g>
<!-- Dev -->
<g id="node2" class="node">
<title>Dev</title>
<ellipse fill="lightgrey" stroke="lightgrey" cx="282.84" cy="-233" rx="57.69" ry="18"/>
<text text-anchor="middle" x="282.84" y="-229.3" font-family="Times,serif" font-size="14.00">Developer</text>
</g>
<!-- AAD&#45;&gt;Dev -->
<g id="edge1" class="edge">
<title>AAD&#45;&gt;Dev</title>
<path fill="none" stroke="black" d="M179.17,-233C191.07,-233 203.12,-233 214.57,-233"/>
<polygon fill="black" stroke="black" points="214.89,-236.5 224.89,-233 214.89,-229.5 214.89,-236.5"/>
<text text-anchor="middle" x="202" y="-236.8" font-family="Times,serif" font-size="14.00">1</text>
</g>
<!-- VS -->
<g id="node3" class="node">
<title>VS</title>
<polygon fill="lightyellow" stroke="lightyellow" points="571.69,-278 386.69,-278 386.69,-242 571.69,-242 571.69,-278"/>
<text text-anchor="middle" x="479.19" y="-256.3" font-family="Times,serif" font-size="14.00">Visual Studio / VS Code</text>
</g>
<!-- Dev&#45;&gt;VS -->
<g id="edge2" class="edge">
<title>Dev&#45;&gt;VS</title>
<path fill="none" stroke="black" d="M335.93,-240.24C348.5,-241.98 362.37,-243.91 376.37,-245.85"/>
<polygon fill="black" stroke="black" points="376.19,-249.36 386.57,-247.27 377.15,-242.43 376.19,-249.36"/>
<text text-anchor="middle" x="363.69" y="-247.8" font-family="Times,serif" font-size="14.00">2</text>
</g>
<!-- GH -->
<g id="node4" class="node">
<title>GH</title>
<polygon fill="lightgrey" stroke="lightgrey" points="513.19,-224 445.19,-224 445.19,-188 513.19,-188 513.19,-224"/>
<text text-anchor="middle" x="479.19" y="-202.3" font-family="Times,serif" font-size="14.00">GitHub</text>
</g>
<!-- Dev&#45;&gt;GH -->
<g id="edge3" class="edge">
<title>Dev&#45;&gt;GH</title>
<path fill="none" stroke="black" d="M335.93,-225.76C366.9,-221.46 405.74,-216.07 435,-212"/>
<polygon fill="black" stroke="black" points="435.5,-215.46 444.93,-210.62 434.54,-208.53 435.5,-215.46"/>
<text text-anchor="middle" x="363.69" y="-224.8" font-family="Times,serif" font-size="14.00">3</text>
</g>
<!-- GHAS -->
<g id="node5" class="node">
<title>GHAS</title>
<polygon fill="lightblue" stroke="lightblue" points="823.69,-318 617.69,-318 617.69,-282 823.69,-282 823.69,-318"/>
<text text-anchor="middle" x="720.69" y="-296.3" font-family="Times,serif" font-size="14.00">GitHub Advanced Security</text>
</g>
<!-- GH&#45;&gt;GHAS -->
<g id="edge4" class="edge">
<title>GH&#45;&gt;GHAS</title>
<path fill="none" stroke="black" d="M513.29,-212.16C531.29,-216.38 553.53,-223.05 571.69,-233 595.45,-246.02 593.75,-260.31 617.69,-273 621.19,-274.85 624.82,-276.58 628.54,-278.2"/>
<polygon fill="black" stroke="black" points="627.36,-281.5 637.94,-282 629.98,-275.01 627.36,-281.5"/>
<text text-anchor="middle" x="594.69" y="-261.8" font-family="Times,serif" font-size="14.00">4</text>
</g>
<!-- GHAct -->
<g id="node6" class="node">
<title>GHAct</title>
<polygon fill="lightgreen" stroke="lightgreen" points="783.19,-131 658.19,-131 658.19,-95 783.19,-95 783.19,-131"/>
<text text-anchor="middle" x="720.69" y="-109.3" font-family="Times,serif" font-size="14.00">GitHub Actions</text>
</g>
<!-- GH&#45;&gt;GHAct -->
<g id="edge5" class="edge">
<title>GH&#45;&gt;GHAct</title>
<path fill="none" stroke="black" d="M513.49,-193.07C552.33,-177.99 617.15,-152.82 663.75,-134.72"/>
<polygon fill="black" stroke="black" points="665.06,-137.97 673.11,-131.09 662.52,-131.44 665.06,-137.97"/>
<text text-anchor="middle" x="594.69" y="-165.8" font-family="Times,serif" font-size="14.00">5</text>
</g>
<!-- Sec -->
<g id="node18" class="node">
<title>Sec</title>
<ellipse fill="lightgrey" stroke="lightgrey" cx="994.5" cy="-300" rx="77.19" ry="18"/>
<text text-anchor="middle" x="994.5" y="-296.3" font-family="Times,serif" font-size="14.00">Security Team</text>
</g>
<!-- GHAS&#45;&gt;Sec -->
<g id="edge17" class="edge">
<title>GHAS&#45;&gt;Sec</title>
<path fill="none" stroke="black" d="M824.06,-300C851.3,-300 880.45,-300 906.76,-300"/>
<polygon fill="black" stroke="black" points="907.08,-303.5 917.08,-300 907.08,-296.5 907.08,-303.5"/>
<text text-anchor="middle" x="851.19" y="-303.8" font-family="Times,serif" font-size="14.00">16</text>
</g>
<!-- AG -->
<g id="node7" class="node">
<title>AG</title>
<polygon fill="lightpink" stroke="lightpink" points="994.5,-112 878.88,-94 994.5,-76 1110.13,-94 994.5,-112"/>
<text text-anchor="middle" x="994.5" y="-90.3" font-family="Times,serif" font-size="14.00">Approval Gates</text>
</g>
<!-- GHAct&#45;&gt;AG -->
<g id="edge6" class="edge">
<title>GHAct&#45;&gt;AG</title>
<path fill="none" stroke="black" d="M783.47,-102.01C802.12,-99.16 822.68,-96.48 841.69,-95 852.87,-94.13 864.52,-93.52 876.19,-93.11"/>
<polygon fill="black" stroke="black" points="876.54,-96.6 886.43,-92.8 876.33,-89.6 876.54,-96.6"/>
<text text-anchor="middle" x="851.19" y="-98.8" font-family="Times,serif" font-size="14.00">7</text>
</g>
<!-- ACR -->
<g id="node8" class="node">
<title>ACR</title>
<path fill="lightgrey" stroke="lightgrey" d="M1093.5,-222.73C1093.5,-224.53 1049.13,-226 994.5,-226 939.88,-226 895.5,-224.53 895.5,-222.73 895.5,-222.73 895.5,-193.27 895.5,-193.27 895.5,-191.47 939.88,-190 994.5,-190 1049.13,-190 1093.5,-191.47 1093.5,-193.27 1093.5,-193.27 1093.5,-222.73 1093.5,-222.73"/>
<path fill="none" stroke="lightgrey" d="M1093.5,-222.73C1093.5,-220.92 1049.13,-219.45 994.5,-219.45 939.88,-219.45 895.5,-220.92 895.5,-222.73"/>
<text text-anchor="middle" x="994.5" y="-204.3" font-family="Times,serif" font-size="14.00">Azure Container Registry</text>
</g>
<!-- GHAct&#45;&gt;ACR -->
<g id="edge7" class="edge">
<title>GHAct&#45;&gt;ACR</title>
<path fill="none" stroke="black" d="M783.39,-116.93C807.93,-119.76 836.11,-124.62 860.69,-133 896.49,-145.2 933.7,-167.14 959.59,-184.15"/>
<polygon fill="black" stroke="black" points="957.65,-187.07 967.91,-189.71 961.54,-181.24 957.65,-187.07"/>
<text text-anchor="middle" x="851.19" y="-136.8" font-family="Times,serif" font-size="14.00">6</text>
</g>
<!-- AKS -->
<g id="node9" class="node">
<title>AKS</title>
<polygon fill="lightblue" stroke="lightblue" points="1096,-58 893,-58 893,-22 1096,-22 1096,-58"/>
<text text-anchor="middle" x="994.5" y="-36.3" font-family="Times,serif" font-size="14.00">Azure Kubernetes Service</text>
</g>
<!-- GHAct&#45;&gt;AKS -->
<g id="edge8" class="edge">
<title>GHAct&#45;&gt;AKS</title>
<path fill="none" stroke="black" d="M773.64,-94.94C794.64,-87.95 819.19,-80.16 841.69,-74 859.36,-69.16 878.31,-64.5 896.64,-60.26"/>
<polygon fill="black" stroke="black" points="897.48,-63.66 906.45,-58.02 895.92,-56.84 897.48,-63.66"/>
<text text-anchor="middle" x="851.19" y="-77.8" font-family="Times,serif" font-size="14.00">8</text>
</g>
<!-- LA -->
<g id="node14" class="node">
<title>LA</title>
<polygon fill="lightgrey" stroke="lightgrey" points="1278.32,-93 1165.32,-93 1165.32,-57 1278.32,-57 1278.32,-93"/>
<text text-anchor="middle" x="1221.82" y="-71.3" font-family="Times,serif" font-size="14.00">Log Analytics</text>
</g>
<!-- AKS&#45;&gt;LA -->
<g id="edge13" class="edge">
<title>AKS&#45;&gt;LA</title>
<path fill="none" stroke="black" d="M1096.3,-55.66C1116.27,-58.76 1136.74,-61.94 1155.17,-64.8"/>
<polygon fill="black" stroke="black" points="1154.76,-68.28 1165.18,-66.36 1155.84,-61.36 1154.76,-68.28"/>
<text text-anchor="middle" x="1137.82" y="-65.8" font-family="Times,serif" font-size="14.00">12</text>
</g>
<!-- ZAP -->
<g id="node16" class="node">
<title>ZAP</title>
<polygon fill="lightcoral" stroke="lightcoral" points="1273.82,-39 1169.82,-39 1169.82,-3 1273.82,-3 1273.82,-39"/>
<text text-anchor="middle" x="1221.82" y="-17.3" font-family="Times,serif" font-size="14.00">OWASP ZAP</text>
</g>
<!-- AKS&#45;&gt;ZAP -->
<g id="edge16" class="edge">
<title>AKS&#45;&gt;ZAP</title>
<path fill="none" stroke="black" d="M1096.3,-31.5C1117.95,-29.67 1140.19,-27.8 1159.78,-26.15"/>
<polygon fill="black" stroke="black" points="1160.09,-29.63 1169.76,-25.31 1159.5,-22.66 1160.09,-29.63"/>
<text text-anchor="middle" x="1137.82" y="-32.8" font-family="Times,serif" font-size="14.00">15</text>
</g>
<!-- MD -->
<g id="node10" class="node">
<title>MD</title>
<polygon fill="lightgreen" stroke="lightgreen" points="798.19,-264 643.19,-264 643.19,-228 798.19,-228 798.19,-264"/>
<text text-anchor="middle" x="720.69" y="-242.3" font-family="Times,serif" font-size="14.00">Microsoft Defender</text>
</g>
<!-- MD&#45;&gt;ACR -->
<g id="edge9" class="edge">
<title>MD&#45;&gt;ACR</title>
<path fill="none" stroke="black" d="M798.49,-235.26C825.31,-231.51 855.95,-227.23 884.87,-223.19"/>
<polygon fill="black" stroke="black" points="885.6,-226.62 895.02,-221.77 884.63,-219.69 885.6,-226.62"/>
<text text-anchor="middle" x="851.19" y="-231.8" font-family="Times,serif" font-size="14.00">9a</text>
</g>
<!-- AP -->
<g id="node11" class="node">
<title>AP</title>
<polygon fill="orange" stroke="orange" points="772.69,-207 668.69,-207 668.69,-171 772.69,-171 772.69,-207"/>
<text text-anchor="middle" x="720.69" y="-185.3" font-family="Times,serif" font-size="14.00">Azure Policy</text>
</g>
<!-- AP&#45;&gt;ACR -->
<g id="edge10" class="edge">
<title>AP&#45;&gt;ACR</title>
<path fill="none" stroke="black" d="M772.82,-192.57C804.44,-194.78 846.26,-197.71 884.98,-200.41"/>
<polygon fill="black" stroke="black" points="885.06,-203.93 895.28,-201.13 885.54,-196.94 885.06,-203.93"/>
<text text-anchor="middle" x="851.19" y="-201.8" font-family="Times,serif" font-size="14.00">10</text>
</g>
<!-- AP&#45;&gt;AKS -->
<g id="edge11" class="edge">
<title>AP&#45;&gt;AKS</title>
<path fill="none" stroke="black" d="M772.99,-186.4C802.59,-182.18 838.28,-171.99 860.69,-148 885.86,-121.05 852.77,-93.24 878.69,-67 880.55,-65.12 882.51,-63.36 884.56,-61.71"/>
<polygon fill="black" stroke="black" points="886.68,-64.5 892.88,-55.91 882.68,-58.76 886.68,-64.5"/>
<text text-anchor="middle" x="851.19" y="-165.8" font-family="Times,serif" font-size="14.00">10</text>
</g>
<!-- KV -->
<g id="node12" class="node">
<title>KV</title>
<polygon fill="gold" stroke="gold" points="762.69,-36 678.69,-36 678.69,0 762.69,0 762.69,-36"/>
<text text-anchor="middle" x="720.69" y="-14.3" font-family="Times,serif" font-size="14.00">Key Vault</text>
</g>
<!-- KV&#45;&gt;AKS -->
<g id="edge12" class="edge">
<title>KV&#45;&gt;AKS</title>
<path fill="none" stroke="black" d="M762.82,-16.69C790.52,-16.2 827.86,-16.3 860.69,-19 867.89,-19.59 875.29,-20.35 882.73,-21.22"/>
<polygon fill="black" stroke="black" points="882.54,-24.72 892.9,-22.47 883.4,-17.77 882.54,-24.72"/>
<text text-anchor="middle" x="851.19" y="-22.8" font-family="Times,serif" font-size="14.00">11</text>
</g>
<!-- Sentinel -->
<g id="node13" class="node">
<title>Sentinel</title>
<polygon fill="lightgrey" stroke="lightgrey" points="1512.32,-120 1436.32,-120 1436.32,-84 1512.32,-84 1512.32,-120"/>
<text text-anchor="middle" x="1474.32" y="-98.3" font-family="Times,serif" font-size="14.00">Sentinel</text>
</g>
<!-- LA&#45;&gt;Sentinel -->
<g id="edge15" class="edge">
<title>LA&#45;&gt;Sentinel</title>
<path fill="none" stroke="black" d="M1278.41,-80.99C1322.75,-85.77 1384.17,-92.39 1426.14,-96.92"/>
<polygon fill="black" stroke="black" points="1425.79,-100.4 1436.11,-97.99 1426.54,-93.44 1425.79,-100.4"/>
<text text-anchor="middle" x="1309.82" y="-88.8" font-family="Times,serif" font-size="14.00">14</text>
</g>
<!-- AM -->
<g id="node15" class="node">
<title>AM</title>
<polygon fill="lightblue" stroke="lightblue" points="1607.32,-66 1341.32,-66 1341.32,-30 1607.32,-30 1607.32,-66"/>
<text text-anchor="middle" x="1474.32" y="-44.3" font-family="Times,serif" font-size="14.00">Azure Monitor / Container Insights</text>
</g>
<!-- LA&#45;&gt;AM -->
<g id="edge14" class="edge">
<title>LA&#45;&gt;AM</title>
<path fill="none" stroke="black" d="M1278.57,-67.18C1284.56,-66.41 1290.56,-65.67 1296.32,-65 1307.46,-63.71 1319.01,-62.44 1330.63,-61.21"/>
<polygon fill="black" stroke="black" points="1331.26,-64.67 1340.84,-60.15 1330.53,-57.7 1331.26,-64.67"/>
<text text-anchor="middle" x="1309.82" y="-68.8" font-family="Times,serif" font-size="14.00">13a</text>
</g>
<!-- NP -->
<g id="node17" class="node">
<title>NP</title>
<polygon fill="lightyellow" stroke="lightyellow" points="152,-305 27,-305 27,-269 152,-269 152,-305"/>
<text text-anchor="middle" x="89.5" y="-283.3" font-family="Times,serif" font-size="14.00">Network Policy</text>
</g>
</g>
</svg>
